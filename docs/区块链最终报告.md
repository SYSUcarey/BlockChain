区块链最终报告

## （2018年秋季学期）
| 课程名称 | 区块链原理与技术 |              |                  |
| :------: | :--------------: | :----------: | :--------------: |
|   年级   |       16级       | 专业（方向） |  软件工程(计应)  |
|   学号   |     16340015     |     姓名     |      陈彬彬      |
|   电话   |   13590883387    |    Email     | 944131226@qq.com |
| 开始日期 |    2018/11/24    |   完成日期   |    2018/11/26    |

---

[TOC]

***

## 1.项目github地址

[我的仓库——https://github.com/SYSUcarey/BlockChain](https://github.com/SYSUcarey/BlockChain)  

***

## 2.选题背景、依据

### IG夺冠与KDA女团   

11月3日下午，韩国仁川，来自中国的 IG 战队在英雄联盟 S8 全球总决赛中勇夺冠军。 久等8年，中国无数 LOL 玩家陷入了狂欢，老玩家纷纷回归召唤师峡谷。同时还带火了这次在开幕式上的KDA女团了。这由阿狸、伊芙琳、卡莎以及阿卡丽四人组成的KDA女团在S8的开幕式上让无数玩家眼前一亮，赛后更是不断的登上微博热搜之中，在一夜之间火爆国内。

有女团又怎么能没有男团呢？ 在男团的选角问题，引起了广泛网友的热议。颜值小鲜肉伊泽瑞尔自然不能少了，不然女粉丝们可不答应；快乐风男亚索给无数玩家带来了笑声与欢乐，人气谁与争锋；皇子高贵的地位，皇族的身份带来着无上的荣耀，坚毅的脸型自然不甘示弱；“你的剑就是我的剑”——德玛盖伦是多少新手的启航者，没功劳也得算苦劳了吧？无极剑圣是风靡数年的英雄，白银黄金局哪一局少了他？现在想来是时候要进行投票选出大家心中最适合的KDA男团了。

### DApp 投票  

是否还记得 S8 全明星投票，很多网友热议没有账号无从投票？等级不够31级没有人权？是否会惧怕投票信息的泄露，定点广告皮肤推荐、手办营销的短信轰击？这都是因为中心化投票机制绑定的账号权限信息，你的喜好信息有可能就被中心机构泄露出去了。而 `Dapp` 去中心化的特点可以解决这个问题，其可容纳市场各方无限数量的参与者，完全匿名的 `DApp` 允许每一个参与者保持一级匿名，不用担心无法投票，也不用担心信息泄露，彻底解决透明度、安全性、可访问性、可信任性的投票难题。

***

## 3.使用说明(应有截图与说明)

### 项目环境

- Ubuntu 18.04

- [Truffle](https://truffleframework.com/) 

- [Ganache](https://truffleframework.com/ganache) 

- [MetaMask](https://www.metamask.io/) 

***

### 项目运行

- 进入`lol-kda-vote` 项目根目录：

```bash
$ cd lol-kda-vote
```

- 编译合约：

```bash
$ truffle compile
```

- 开启Ganache私有链

  私有链配置：

  - `Gas Limit` : 200000000
  - `ACCOUNT DEFAULT BALANCE` : 100
  - `TOTAL ACCOUNTS TO GENERATE` : 30
  - `HOSTNAME` : 127.0.0.1 -lo
  - `PORT NUMBER` : 8545
  - `NETWORK ID` : 5777

![1546161117764](区块链最终报告.assets/1546161117764.png)



- 部署合约到Ganache私有链上

```bash
$ truffle migrate
```

![1546161340091](区块链最终报告.assets/1546161340091.png)



- npm 运行

```bash
$ npm run dev
```

![1546161605814](区块链最终报告.assets/1546161605814.png)

![1546161633199](区块链最终报告.assets/1546161633199.png)

***

### 使用说明

- 通过 `MetaMask` 使用账户 `Private Key` 进行用户登陆
- 每个用户只能投一票



以下简单展示一下使用：

**用账户1给 疾风剑豪·亚索 投票：** 

点击“给他投票”按钮：

![1546162140206](区块链最终报告.assets/1546162140206.png)

弹出区块链交易申请

![1546162229089](区块链最终报告.assets/1546162229089.png)

点击 `CONFIRM` 确认交易：

![1546164542119](区块链最终报告.assets/1546164542119.png)

页面刷新，亚索得票数增加，排名升到第一(按钮显示已投票)：

![1546164600048](区块链最终报告.assets/1546164600048.png)



**切换到账户1给 德玛西亚盖仑 投票：**

切换账号看到，另一个账号未投过票，因此按钮显示可投票，而且能看到亚索第一的排名：

![1546164803869](区块链最终报告.assets/1546164803869.png)

同样操作给盖仑投票：

![1546164844400](区块链最终报告.assets/1546164844400.png)

![1546164861838](区块链最终报告.assets/1546164861838.png)

![1546164885335](区块链最终报告.assets/1546164885335.png)

  

**可以看到此时的区块变化:** 

（查看区块交易详情有两个交易）

![1546164994672](区块链最终报告.assets/1546164994672.png)



***

## 4.测试

接着我们将进行测试：

- 用账号1, 3-5给亚索投票(累计4票)

- 用账号2, 6-7给盖仑投票(累计3票)

- 用账号8-9给伊泽瑞尔投票(累计2票)

- 用账号10-11给德玛西亚皇子投票(累计2票)

- 用账号12给德莱文投票(累计1票)

![1546171992977](区块链最终报告.assets/1546171992977.png)

投票结果如上图所示，票数显示正确，排名正确。

按DApp预想，当前领先KDA男团选取的是亚索、盖仑、伊泽瑞尔、皇子。

当前区块信息：

![1546172188674](区块链最终报告.assets/1546172188674.png)

合约部署总共4个区块，投票12次，共12个区块。当前链区块为16，正确。

